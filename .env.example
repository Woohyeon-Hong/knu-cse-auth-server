# Runtime
SPRING_PROFILES_ACTIVE=prod
AUTH_SERVER_PORT=11111
JAVA_OPTS=-Xms512m -Xmx1024m

# Database
DB_DRIVER=com.mysql.cj.jdbc.Driver
DB_IP=chcse-mysql
DB_PORT=13306
DB_NAME=chcse-mysql
DB_URL=jdbc:mysql://chcse-mysql:20001/chcse-mysql?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul
DB_USERNAME=change-me
DB_PASSWORD=change-me

# JPA / Flyway
FLYWAY_ENABLED=false
FLYWAY_BASELINE_ON_MIGRATE=false
JPA_DATABASE_PLATFORM=org.hibernate.dialect.MySQL8Dialect
JPA_DDL_AUTO=validate
HIBERNATE_SHOW_SQL=false
HIBERNATE_FORMAT_SQL=false
HIBERNATE_HIGHLIGHT_SQL=false
HIBERNATE_USE_SQL_COMMENTS=false
HIBERNATE_JDBC_TIME_ZONE=Asia/Seoul
HIBERNATE_DEFAULT_BATCH_FETCH_SIZE=20

# App
FRONTEND_BASE_URL=https://chcse.knu.ac.kr
APP_REDIRECT_ALLOWLIST=https://chcse.knu.ac.kr
APP_INTERNAL_API_KEY=change-me
APP_ROLE_SYNC_CRON=0 0 3 * * *
APP_OAUTH2_IDP_HINT=google
APP_AUTH_ALLOWED_EMAIL_DOMAIN=@knu.ac.kr
APP_INTERNAL_PATH_PREFIX=/internal
APP_INTERNAL_HEADER_NAME=X-Internal-Api-Key
APP_COOKIE_NAME=ACCESS_TOKEN
APP_COOKIE_PATH=/
APP_COOKIE_MAX_AGE_SECONDS=3600
APP_COOKIE_SAME_SITE=LAX
APP_COOKIE_HTTP_ONLY=true
APP_COOKIE_SECURE=true
APP_ROLE_SYNC_ZONE=Asia/Seoul

# Logging
APP_LOG_LEVEL=INFO
SPRING_SECURITY_LOG_LEVEL=INFO
SPRING_SECURITY_OAUTH2_LOG_LEVEL=INFO
SQL_BINDER_LOG_LEVEL=WARN

# Keycloak (for Spring OAuth2)
KEYCLOAK_REALM=cse-sso
KEYCLOAK_ISSUER_URI=https://sso.example.com/realms/cse-sso
KEYCLOAK_AUTHORIZATION_URI=https://sso.example.com/realms/cse-sso/protocol/openid-connect/auth

# Server-to-server endpoints
KEYCLOAK_BASE_URL=https://sso.example.com
KEYCLOAK_TOKEN_URI=https://sso.example.com/realms/cse-sso/protocol/openid-connect/token
KEYCLOAK_JWK_SET_URI=https://sso.example.com/realms/cse-sso/protocol/openid-connect/certs
KEYCLOAK_USER_INFO_URI=https://sso.example.com/realms/cse-sso/protocol/openid-connect/userinfo

KEYCLOAK_CONNECT_TIMEOUT_SECONDS=5
KEYCLOAK_READ_TIMEOUT_SECONDS=10

# Keycloak clients
KEYCLOAK_CLIENT_ID=cse-sso-server
KEYCLOAK_CLIENT_SECRET=change-me
KEYCLOAK_ADMIN_CLIENT_ID=cse-sso-admin
KEYCLOAK_ADMIN_CLIENT_SECRET=change-me

# Keycloak Client Metadata Sync (bootstrap-clients.sh)
# AUTH_CLIENT_* should point to auth-server public URL.
# If AUTH_CLIENT_BASE_URL changes, update the 3 fields below consistently.
AUTH_CLIENT_BASE_URL=https://auth.example.com

# Google IdP (in Keycloak)
GOOGLE_IDP_ALIAS=google
GOOGLE_IDP_CLIENT_ID=change-me
GOOGLE_IDP_CLIENT_SECRET=change-me
