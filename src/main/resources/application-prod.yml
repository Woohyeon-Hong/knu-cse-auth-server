server:
  port: ${AUTH_SERVER_PORT}

spring:
  datasource:
    driver-class-name: ${DB_DRIVER}
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}

  flyway:
    enabled: ${FLYWAY_ENABLED}
    baseline-on-migrate: ${FLYWAY_BASELINE_ON_MIGRATE}

  jpa:
    database-platform: ${JPA_DATABASE_PLATFORM}
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO}

  security:
    oauth2:
      client:
        registration:
          keycloak:
            client-id: ${KEYCLOAK_CLIENT_ID}
            client-secret: ${KEYCLOAK_CLIENT_SECRET}
        provider:
          keycloak:
            authorization-uri: ${KEYCLOAK_AUTHORIZATION_URI}
            token-uri: ${KEYCLOAK_TOKEN_URI}
            jwk-set-uri: ${KEYCLOAK_JWK_SET_URI}
            user-info-uri: ${KEYCLOAK_USER_INFO_URI}
            user-name-attribute: preferred_username

keycloak:
  base-url: ${KEYCLOAK_BASE_URL}
  realm: ${KEYCLOAK_REALM}
  post-logout-redirect-uri: ${KEYCLOAK_POST_LOGOUT_REDIRECT_URI:${FRONTEND_BASE_URL}}
  admin:
    client-id: ${KEYCLOAK_ADMIN_CLIENT_ID}
    client-secret: ${KEYCLOAK_ADMIN_CLIENT_SECRET}

app:
  oauth2:
    idp-hint: ${APP_OAUTH2_IDP_HINT:}
  frontend:
    base-url: ${FRONTEND_BASE_URL}
    callback-url: ${FRONTEND_CALLBACK_URL:${FRONTEND_BASE_URL}/signup}
  redirect-allowlist: ${APP_REDIRECT_ALLOWLIST}
  internal:
    api-key: ${APP_INTERNAL_API_KEY}
  role-sync:
    cron: ${APP_ROLE_SYNC_CRON}

logging:
  level:
    kr.ac.knu.cse: ${APP_LOG_LEVEL:INFO}
    org.springframework.security: ${SPRING_SECURITY_LOG_LEVEL:INFO}
    org.springframework.security.oauth2: ${SPRING_SECURITY_OAUTH2_LOG_LEVEL:INFO}
    org.type.descriptor.sql.BasicBinder: ${SQL_BINDER_LOG_LEVEL:WARN}
